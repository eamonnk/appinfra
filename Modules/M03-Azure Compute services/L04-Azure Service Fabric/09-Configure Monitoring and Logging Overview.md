

We'll look at some details about OMS and explore more options for logging and analyzing diagnostics.


### OMS and Azure Service Fabric

![Screenshot of the Microsoft Operations Management Suite (OMS) desktop, with the Service Fabric Overview page displaying.](../../Linked_Image_Files\3.4.2_OMS_SFA_sln.png)

In the Microsoft Operations Management Suite (OMS) There is a management solution—or plug-in—for OMS that is designed specifically for diagnostics on Service Fabric clusters. This solution is called *Service Fabric Analytics*.

Adding this to your OMS workspace provides you with a dashboard. In one glance, you'll get an overview of important issues and cluster and application events. These graphs are based on diagnostics data gathered from the servers forming the Service Fabric cluster. By using the VM extension Windows Azure Diagnostics, you install an agent on your VMs that is able to collect and upload this diagnostics data into a storage account. OMS can access that data to analyze and present the information on the dashboard.

![Screenshot of the OMS desktop Log Search page.](../Linked_Image_Files\3.4.2_OMS_Log_Analytics_sln.png)

If you want to drill down to the details of the graphs, you can do so by clicking on the items in the table. This will navigate you to the OMS Log Analytics management solution. By using Log Analytics, you can view detailed descriptions of all captured diagnostics data. 

You can review details of diagnostics events such as Event Trace for Windows (ETW), that were generated by Services and Actors running in Service Fabric. *ETW* is a high-performance logging system that you can use for logging information such as errors or diagnostics traces from your application. 

OMS has been used for a lot of our diagnostics so far, but there are alternative tools that you can use.

### Service Fabric diagnostics alternatives

Logging by using an agent process is generally advisable, as it can keep working even if your service does not. This in-process approach works well for custom logs created by services that would otherwise require infrastructure changes to be properly logged. Specifically, all event sources used in code must be registered on every cluster node to work. The recommended way to do this is to register them in your Azure Resource Manager template.

If you don't want to register every event provider in your template, using Microsoft Diagnostics EventFlow for these specific logs might be a good solution. However, it's fine to use a combination of both methods.

#### EventFlow
created by the Microsoft Visual Studio Team, *EventFlow* is an open-source library designed specifically for in-process log collection. This library enables your services to send logs directly to a central location, while not relying on an agent such as the Azure Diagnostics extension to do that. This makes sense if services come and go, or when services need to send their data to varying central locations. 

EventFlow does not rely on the Event Trace for Windows infrastructure; it can send logs to many outputs, including Application Insights, OMS, Azure Event Hubs, and the console window.
